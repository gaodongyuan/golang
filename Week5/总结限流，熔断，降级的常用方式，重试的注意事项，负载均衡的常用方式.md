

## 总结限流，熔断，降级的常用方式，重试的注意事项，负载均衡的常用方式



### 限流

+  令牌桶

  > 是一个存放固定容量令牌的桶，按照固定速率往桶里添加令牌

+  漏桶

  > 作为计量工具（The Leaky Bucket Algorithm as a Meter）时，可以用于流量整形
  > （Traffic Shaping）和流量控制（TrafficPolicing）

+ 并发控制

  > 利用channel的缓冲设定，可以来实现并发的限制。只要在执行并发的同时，往一个带有缓冲的 channel 里写入点东西（随便写啥，内容不重要）。让并发的 goroutine在执行完成后把这个 channel 里的东西给读走。这样整个并发的数量就将控制在这个 channel的缓冲区大小上

+ 计数器

  > 计数器是一种最简单限流算法，其原理就是：在一段时间间隔内，对请求进行计数，与阀值进行比较判断是否需要限流，一旦到了时间临界点，将计数器清零

+ Redis消息队列限流

  > 使用Redis的List类型的消息队列，指定队列固定长度，开始会一直往队列塞数据，当下游消费能力不足，队列处于满员状态时，生产者的数据直接丢弃，以此实现限流

+ 自适应限流

+ 客户端限流



## 熔断

+ Google SRE



## 降级

+ 页面降级、延迟服务、写/读降级、缓存降级

## 重试的注意事项

+ 注意重试的次数

## 负载均衡

+ 随机负载
+ 轮询负载
+ 加权轮询负载
+ 一致性hash
+ p2c 算法







 



























